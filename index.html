<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>App-ÎŸÎ¿Ï…-ÎºÎ¬Î»Ï…ÏˆÎ· âœ¨</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Pacifico&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .font-pacifico {
            font-family: 'Pacifico', cursive;
        }
        /* Custom scrollbar for a cleaner look */
        #ideas-container::-webkit-scrollbar {
            width: 8px;
        }
        #ideas-container::-webkit-scrollbar-track {
            background: #fdf4ff;
            border-radius: 10px;
        }
        #ideas-container::-webkit-scrollbar-thumb {
            background: #f0abfc;
            border-radius: 10px;
        }
        #ideas-container::-webkit-scrollbar-thumb:hover {
            background: #e879f9;
        }
        .idea-card {
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            animation: slide-in 0.5s ease-out forwards;
        }
        .idea-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
        @keyframes slide-in {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .delete-btn {
            cursor: pointer;
            opacity: 0.3;
            transition: opacity 0.2s;
        }
        .delete-btn:hover {
            opacity: 1;
        }
    </style>
</head>
<body class="bg-slate-100 text-slate-800">

    <div class="container mx-auto p-4 md:p-6 max-w-5xl">
        
        <!-- Header Section -->
        <header class="text-center mb-8">
<!-- ÎœÎ•Î¤Î‘ Î¤Î—Î Î‘Î›Î›Î‘Î“Î— (Î‘Ï…Ï„ÏŒ Ï€Î¿Ï… Î¸Î± Î²Î¬Î»ÎµÎ¹Ï‚) -->
<div class="flex justify-center items-center gap-2 sm:gap-3">
    <span class="text-xl sm:text-5xl md:text-6xl">ğŸ’¡</span>
    <h1 class="font-pacifico text-xl sm:text-5xl md:text-6xl ...">
        App-ÎŸÎ¿Ï…-ÎºÎ¬Î»Ï…ÏˆÎ·
    </h1>
    <span class="text-xl sm:text-5xl md:text-6xl">ğŸ”®</span>
</div>
            <p class="text-slate-500 mt-6 text-lg">Î ÏÏŒÏ„ÎµÎ¹Î½Îµ Ï„Î·Î½ ÎµÏ€ÏŒÎ¼ÎµÎ½Î· ÎºÎ¿ÏÏ…Ï†Î±Î¯Î± ÎµÏ†Î±ÏÎ¼Î¿Î³Î®!</p>
        </header>

        <main class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            
            <!-- Left Column: Form and Info -->
            <div class="bg-white p-6 rounded-2xl shadow-xl border-t-4 border-purple-400">
                <img src="poll.png" alt="Î•Î¹ÎºÏŒÎ½Î± ÏˆÎ·Ï†Î¿Ï†Î¿ÏÎ¯Î±Ï‚ Î³Î¹Î± Î¹Î´Î­ÎµÏ‚" class="w-full h-auto rounded-xl mb-6 shadow-md" onerror="this.onerror=null;this.src='https://placehold.co/600x400/a855f7/ffffff?text=Î ÎµÏ‚+Î¼Î±Ï‚+Ï„Î·Î½+Î¹Î´Î­Î±+ÏƒÎ¿Ï…!';">
                
                <p class="text-slate-600 leading-relaxed mb-6">
                    ÎšÎ±Ï„Î±Ï‡ÏÏÎ¹ÏƒÎµ Ï„Î·Î½ Î¹Î´Î­Î± Î³Î¹Î± Î¼Î¹Î± Î½Î­Î± ÎµÏ†Î±ÏÎ¼Î¿Î³Î® ÎµÎºÏ€Î±Î¹Î´ÎµÏ…Ï„Î¹ÎºÎ¿Ï Î® Î³ÎµÎ½Î¹ÎºÏŒÏ„ÎµÏÎ¿Ï… ÎµÎ½Î´Î¹Î±Ï†Î­ÏÎ¿Î½Ï„Î¿Ï‚ ÎºÎ±Î¹ Î±Î½ Î¸Î­Î»ÎµÎ¹Ï‚ ÎºÎ±Î¹ Ï„Î¿ ÏŒÎ½Î¿Î¼Î¬ ÏƒÎ¿Ï…. ÎŸÎ¹ Î¹Î´Î­ÎµÏ‚ Ï€Î¿Ï… Î¸Î± Î¼Î¿Ï… ÎºÎ¹Î½Î®ÏƒÎ¿Ï…Î½ Ï„Î·Î½ Ï€ÎµÏÎ¹Î­ÏÎ³ÎµÎ¹Î± Î¸Î± Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î·Î¸Î¿ÏÎ½ Î¼Îµ Î±Î½Î±Ï†Î¿ÏÎ¬ ÎºÎ±Î¹ ÏƒÎµ ÎµÏƒÎ­Î½Î± Ï€Î¿Ï… Ï€ÏÏŒÏ„ÎµÎ¹Î½ÎµÏ‚ Ï„Î·Î½ Î¹Î´Î­Î±.
                </p>
                <p class="text-sm text-slate-500 text-right font-medium">ÎœÎµ Ï†Î¹Î»Î¹ÎºÎ¿ÏÏ‚ Ï‡Î±Î¹ÏÎµÏ„Î¹ÏƒÎ¼Î¿ÏÏ‚,<br>Î Î±Î½Î±Î³Î¹ÏÏ„Î·Ï‚ Î”ÏŒÎ¼Î²ÏÎ¿Ï‚</p>
                
                <hr class="my-6 border-slate-200">

                <!-- Submission Form -->
                <form id="idea-form">
                    <div class="mb-4">
                        <label for="idea-text" class="block text-md font-medium text-slate-700 mb-1">âœï¸ Î— Î™Î´Î­Î± ÏƒÎ¿Ï…:</label>
                        <textarea id="idea-text" rows="4" class="w-full p-3 border-2 border-slate-200 rounded-lg focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition" placeholder="Ï€.Ï‡. ÎœÎ¹Î± ÎµÏ†Î±ÏÎ¼Î¿Î³Î® Ï€Î¿Ï… Î¼ÎµÏ„Î±Ï†ÏÎ¬Î¶ÎµÎ¹ Ï„Î¿ Î³Î±ÏÎ³Î¹ÏƒÎ¼Î± Ï„Ï‰Î½ ÏƒÎºÏÎ»Ï‰Î½!" required></textarea>
                    </div>
                    <div class="mb-4">
                        <label for="name" class="block text-md font-medium text-slate-700 mb-1">ğŸ‘¤ Î¤Î¿ ÎŒÎ½Î¿Î¼Î¬ ÏƒÎ¿Ï… (Î ÏÎ¿Î±Î¹ÏÎµÏ„Î¹ÎºÏŒ):</label>
                        <input type="text" id="name" class="w-full p-3 border-2 border-slate-200 rounded-lg focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition" placeholder="Ï€.Ï‡. Super Coder">
                    </div>
                    <button type="submit" id="submit-button" class="w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold py-3 px-4 rounded-lg hover:from-purple-600 hover:to-pink-600 active:scale-95 transition-all duration-200 flex items-center justify-center shadow-lg hover:shadow-xl text-lg">
                        <span id="button-text">Î¥Ï€Î¿Î²Î¿Î»Î® Î™Î´Î­Î±Ï‚! âœ¨</span>
                        <div id="loading-spinner" class="hidden animate-spin rounded-full h-6 w-6 border-b-2 border-white"></div>
                    </button>
                </form>
                 <div id="success-message" class="hidden mt-4 p-3 bg-green-100 text-green-800 border border-green-200 rounded-lg text-center">
                    Î•Ï…Ï‡Î±ÏÎ¹ÏƒÏ„Î¿ÏÎ¼Îµ! Î— Î¹Î´Î­Î± ÏƒÎ¿Ï… ÎºÎ±Ï„Î±Ï‡Ï‰ÏÎ®Î¸Î·ÎºÎµ! ğŸ‰
                </div>
                 <div id="error-message" class="hidden mt-4 p-3 bg-red-100 text-red-800 border border-red-200 rounded-lg text-center">
                    Î©Ï‡! ğŸ˜± ÎšÎ¬Ï„Î¹ Ï€Î®Î³Îµ ÏƒÏ„ÏÎ±Î²Î¬. Î”Î¿ÎºÎ¯Î¼Î±ÏƒÎµ Î¾Î±Î½Î¬.
                </div>
            </div>

            <!-- Right Column: Ideas Wall -->
            <div class="bg-white p-6 rounded-2xl shadow-xl border-t-4 border-pink-400">
                <h2 class="text-3xl font-bold text-slate-700 mb-4 border-b-2 border-slate-200 pb-2">ğŸ§  ÎŸÎ¹ Î™Î´Î­ÎµÏ‚ ÏƒÎ±Ï‚:</h2>
                <div id="ideas-container" class="space-y-4 h-[500px] lg:h-[600px] overflow-y-auto pr-2">
                    <!-- Ideas will be dynamically inserted here -->
                     <div id="initial-loader" class="text-center py-10">
                        <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto"></div>
                        <p class="text-slate-500 mt-3">Î¦ÏŒÏÏ„Ï‰ÏƒÎ· Î¹Î´ÎµÏÎ½...</p>
                    </div>
                </div>
            </div>
        </main>

    </div>

    <!-- Simple Data Storage Logic -->
    <script>
        const STORAGE_URL = 'https://api.jsonbin.io/v3/b/66ab8d0fe41b4d34e40f3394';
        const MASTER_KEY = '$2a$10$wL4b.9VwLgV1f2b3e4f5g6h7j8k9l0m1n2o3p4q5r6s7t8u9v'; 
        const SECRET_PASSWORD = "!@#123!@#"; // ÎŸÏÎ¹ÏƒÎ¼ÏŒÏ‚ Ï„Î¿Ï… Î¼Ï…ÏƒÏ„Î¹ÎºÎ¿Ï ÎºÏ‰Î´Î¹ÎºÎ¿Ï

        const ideaForm = document.getElementById('idea-form');
        const ideasContainer = document.getElementById('ideas-container');
        const initialLoader = document.getElementById('initial-loader');
        const submitButton = document.getElementById('submit-button');
        const buttonText = document.getElementById('button-text');
        const loadingSpinner = document.getElementById('loading-spinner');
        const successMessage = document.getElementById('success-message');
        const errorMessage = document.getElementById('error-message');

        const ideaEmojis = ['ğŸ’¡', 'ğŸš€', 'ğŸ‰', 'ğŸŒŸ', 'ğŸ¨', 'ğŸ¤–', 'ğŸ§ ', 'âœ¨', 'ğŸ”¥', 'ğŸ¦„', 'ğŸ‘¾', 'ğŸŒ', 'ğŸ¸', 'ğŸ•', 'ğŸŒ®'];

        function displayIdeas(ideas) {
            initialLoader.style.display = 'none';
            
            if (!ideas || ideas.length === 0) {
                ideasContainer.innerHTML = `<p class="text-center text-slate-500 py-10">Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ Î±ÎºÏŒÎ¼Î± Î¹Î´Î­ÎµÏ‚. Î“Î¯Î½Îµ Î¿ Ï€ÏÏÏ„Î¿Ï‚ Ï€Î¿Ï… Î¸Î± Ï€ÏÎ¿Ï„ÎµÎ¯Î½ÎµÎ¹ Î¼Î¯Î±! ğŸ¥‡</p>`;
                return;
            }
            
            ideas.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));

            let ideasHtml = '';
            ideas.forEach(idea => {
                const date = new Date(idea.createdAt).toLocaleDateString('el-GR');
                const name = idea.name ? idea.name : 'Î‘Î½ÏÎ½Ï…Î¼Î¿Ï‚ ğŸ•µï¸';
                const randomEmoji = ideaEmojis[Math.floor(Math.random() * ideaEmojis.length)];
                
                ideasHtml += `
                    <div class="idea-card bg-purple-50 border border-purple-200 p-4 rounded-xl shadow-sm">
                        <div class="flex justify-between items-start">
                            <p class="text-slate-800 mb-3 text-lg w-full"><span class="mr-2">${randomEmoji}</span>${idea.ideaText}</p>
                            <span class="delete-btn text-lg" data-id="${idea.createdAt}">ğŸ—‘ï¸</span>
                        </div>
                        <div class="flex justify-between items-center text-xs text-slate-500 mt-4 pt-2 border-t border-purple-100">
                            <span class="font-semibold">${name}</span>
                            <span>${date}</span>
                        </div>
                    </div>
                `;
            });
            ideasContainer.innerHTML = ideasHtml;
        }

        async function updateRemoteStorage(ideas) {
            const response = await fetch(STORAGE_URL, {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json',
                    'X-Master-Key': MASTER_KEY
                },
                body: JSON.stringify({ ideas: ideas })
            });
            if (!response.ok) {
                throw new Error('Could not save the updated list.');
            }
        }

        async function fetchIdeas() {
            const response = await fetch(`${STORAGE_URL}/latest`, { 
                headers: { 'X-Master-Key': MASTER_KEY }
            });
            if (!response.ok) {
                if (response.status === 404) {
                   return [];
                }
                throw new Error('Network response was not ok');
            }
            const data = await response.json();
            return data.record.ideas || [];
        }

        async function loadIdeas() {
            try {
                const ideas = await fetchIdeas();
                displayIdeas(ideas);
            } catch (error) {
                console.error("Error fetching ideas:", error);
                initialLoader.style.display = 'none';
                ideasContainer.innerHTML = `<p class="text-center text-red-500 py-10">Î Î±ÏÎ¿Ï…ÏƒÎ¹Î¬ÏƒÏ„Î·ÎºÎµ ÏƒÏ†Î¬Î»Î¼Î± ÎºÎ±Ï„Î¬ Ï„Î· Ï†ÏŒÏÏ„Ï‰ÏƒÎ· Ï„Ï‰Î½ Î¹Î´ÎµÏÎ½. ğŸ˜­</p>`;
            }
        }

        ideaForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            successMessage.classList.add('hidden');
            errorMessage.classList.add('hidden');
            buttonText.classList.add('hidden');
            loadingSpinner.classList.remove('hidden');
            submitButton.disabled = true;

            try {
                const currentIdeas = await fetchIdeas();
                const newIdea = {
                    ideaText: document.getElementById('idea-text').value,
                    name: document.getElementById('name').value || 'Î‘Î½ÏÎ½Ï…Î¼Î¿Ï‚ ğŸ•µï¸',
                    createdAt: new Date().toISOString()
                };
                const updatedIdeas = [newIdea, ...currentIdeas];
                
                await updateRemoteStorage(updatedIdeas);
                
                ideaForm.reset();
                successMessage.classList.remove('hidden');
                displayIdeas(updatedIdeas);

            } catch (error) {
                console.error("Error adding document: ", error);
                errorMessage.classList.remove('hidden');
            } finally {
                buttonText.classList.remove('hidden');
                loadingSpinner.classList.add('hidden');
                submitButton.disabled = false;
            }
        });

        ideasContainer.addEventListener('click', async (e) => {
            if (e.target.classList.contains('delete-btn')) {
                const enteredPassword = prompt("Î Î±ÏÎ±ÎºÎ±Î»Ï ÎµÎ¹ÏƒÎ¬Î³ÎµÏ„Îµ Ï„Î¿Î½ ÎºÏ‰Î´Î¹ÎºÏŒ Î´Î¹Î±Î³ÏÎ±Ï†Î®Ï‚:");
                if (enteredPassword === null) return; // User cancelled

                if (enteredPassword === SECRET_PASSWORD) {
                    const ideaId = e.target.getAttribute('data-id');
                    const confirmation = confirm("Î•Î¯ÏƒÏ„Îµ ÏƒÎ¯Î³Î¿Ï…ÏÎ¿Ï‚ ÏŒÏ„Î¹ Î¸Î­Î»ÎµÏ„Îµ Î½Î± Î´Î¹Î±Î³ÏÎ¬ÏˆÎµÏ„Îµ Î±Ï…Ï„Î® Ï„Î·Î½ Î¹Î´Î­Î±;");
                    if (!confirmation) return;

                    try {
                        const currentIdeas = await fetchIdeas();
                        const updatedIdeas = currentIdeas.filter(idea => idea.createdAt !== ideaId);
                        await updateRemoteStorage(updatedIdeas);
                        displayIdeas(updatedIdeas);
                        alert("Î— Î¹Î´Î­Î± Î´Î¹Î±Î³ÏÎ¬Ï†Î·ÎºÎµ Î¼Îµ ÎµÏ€Î¹Ï„Ï…Ï‡Î¯Î±!");
                    } catch (error) {
                        console.error("Error deleting idea:", error);
                        alert("Î‘Ï€Î¿Ï„Ï…Ï‡Î¯Î± Î´Î¹Î±Î³ÏÎ±Ï†Î®Ï‚. Î ÏÎ¿ÏƒÏ€Î±Î¸Î®ÏƒÏ„Îµ Î¾Î±Î½Î¬.");
                    }
                } else {
                    alert("Î›Î¬Î¸Î¿Ï‚ ÎºÏ‰Î´Î¹ÎºÏŒÏ‚!");
                }
            }
        });

        loadIdeas();
    </script>
</body>
</html>
